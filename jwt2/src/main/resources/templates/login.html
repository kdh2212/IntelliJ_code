<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>로그인</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
<div class="container mt-5 col-md-4">
    <h3 class="text-center mb-4">🔐 로그인</h3>
    <form id="loginForm">
        <input class="form-control mb-2" placeholder="Username" id="username" required>
        <input class="form-control mb-3" type="password" placeholder="Password" id="password" required>
        <button type="submit" class="btn btn-primary w-100">Login</button>
    </form>
    <p class="text-center mt-3">회원이 아니신가요? <a href="/register">회원가입</a></p>
</div>

<script>
    document.getElementById('loginForm').addEventListener('submit', async e => {
        e.preventDefault();
        const res = await fetch('/api/login', {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({
                username: username.value,
                password: password.value
            })
        });
        const data = await res.json();
        if (data.token) {
            localStorage.setItem('token', data.token);
            localStorage.setItem('username', data.username);
            location.href = '/';
        } else {
            alert('로그인 실패');
        }
    });
</script>
</body>
</html>
