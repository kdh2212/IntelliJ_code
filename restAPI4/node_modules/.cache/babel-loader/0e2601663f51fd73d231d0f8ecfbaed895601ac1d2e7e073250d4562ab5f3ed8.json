{"ast":null,"code":"import _regeneratorRuntime from \"C:/_dev3/restAPI4/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/_dev3/restAPI4/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.date.get-year.js\";\nimport \"core-js/modules/es.date.set-year.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport { mergeProps as _mergeProps, createVNode as _createVNode } from \"vue\";\n// Styles\nimport \"./VDatePickerYears.css\";\n\n// Components\nimport { VBtn } from \"../VBtn/index.mjs\"; // Composables\nimport { useDate } from \"../../composables/date/index.mjs\";\nimport { useProxiedModel } from \"../../composables/proxiedModel.mjs\"; // Utilities\nimport { computed, nextTick, onMounted, watchEffect } from 'vue';\nimport { convertToUnit, createRange, genericComponent, propsFactory, templateRef, useRender } from \"../../util/index.mjs\"; // Types\n// Types\nexport var makeVDatePickerYearsProps = propsFactory({\n  color: String,\n  height: [String, Number],\n  min: null,\n  max: null,\n  modelValue: Number\n}, 'VDatePickerYears');\nexport var VDatePickerYears = genericComponent()({\n  name: 'VDatePickerYears',\n  props: makeVDatePickerYearsProps(),\n  emits: {\n    'update:modelValue': function updateModelValue(year) {\n      return true;\n    }\n  },\n  setup: function setup(props, _ref) {\n    var emit = _ref.emit,\n      slots = _ref.slots;\n    var adapter = useDate();\n    var model = useProxiedModel(props, 'modelValue');\n    var years = computed(function () {\n      var year = adapter.getYear(adapter.date());\n      var min = year - 100;\n      var max = year + 52;\n      if (props.min) {\n        min = adapter.getYear(adapter.date(props.min));\n      }\n      if (props.max) {\n        max = adapter.getYear(adapter.date(props.max));\n      }\n      var date = adapter.startOfYear(adapter.date());\n      date = adapter.setYear(date, min);\n      return createRange(max - min + 1, min).map(function (i) {\n        var text = adapter.format(date, 'year');\n        date = adapter.setYear(date, adapter.getYear(date) + 1);\n        return {\n          text: text,\n          value: i\n        };\n      });\n    });\n    watchEffect(function () {\n      var _model$value;\n      model.value = (_model$value = model.value) !== null && _model$value !== void 0 ? _model$value : adapter.getYear(adapter.date());\n    });\n    var yearRef = templateRef();\n    onMounted(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var _yearRef$el;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return nextTick();\n          case 2:\n            (_yearRef$el = yearRef.el) === null || _yearRef$el === void 0 || _yearRef$el.scrollIntoView({\n              block: 'center'\n            });\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    })));\n    useRender(function () {\n      return _createVNode(\"div\", {\n        \"class\": \"v-date-picker-years\",\n        \"style\": {\n          height: convertToUnit(props.height)\n        }\n      }, [_createVNode(\"div\", {\n        \"class\": \"v-date-picker-years__content\"\n      }, [years.value.map(function (year, i) {\n        var _slots$year, _slots$year2;\n        var btnProps = {\n          ref: model.value === year.value ? yearRef : undefined,\n          active: model.value === year.value,\n          color: model.value === year.value ? props.color : undefined,\n          rounded: true,\n          text: year.text,\n          variant: model.value === year.value ? 'flat' : 'text',\n          onClick: function onClick() {\n            if (model.value === year.value) {\n              emit('update:modelValue', model.value);\n              return;\n            }\n            model.value = year.value;\n          }\n        };\n        return (_slots$year = (_slots$year2 = slots.year) === null || _slots$year2 === void 0 ? void 0 : _slots$year2.call(slots, {\n          year: year,\n          i: i,\n          props: btnProps\n        })) !== null && _slots$year !== void 0 ? _slots$year : _createVNode(VBtn, _mergeProps({\n          \"key\": \"month\"\n        }, btnProps), null);\n      })])]);\n    });\n    return {};\n  }\n});","map":{"version":3,"names":["VBtn","useDate","useProxiedModel","computed","nextTick","onMounted","watchEffect","convertToUnit","createRange","genericComponent","propsFactory","templateRef","useRender","makeVDatePickerYearsProps","color","String","height","Number","min","max","modelValue","VDatePickerYears","name","props","emits","updateModelValue","year","setup","_ref","emit","slots","adapter","model","years","getYear","date","startOfYear","setYear","map","i","text","format","value","_model$value","yearRef","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yearRef$el","wrap","_callee$","_context","prev","next","el","scrollIntoView","block","stop","_createVNode","_slots$year","_slots$year2","btnProps","ref","undefined","active","rounded","variant","onClick","call","_mergeProps"],"sources":["../../../src/components/VDatePicker/VDatePickerYears.tsx"],"sourcesContent":["// Styles\nimport './VDatePickerYears.sass'\n\n// Components\nimport { VBtn } from '@/components/VBtn'\n\n// Composables\nimport { useDate } from '@/composables/date'\nimport { useProxiedModel } from '@/composables/proxiedModel'\n\n// Utilities\nimport { computed, nextTick, onMounted, watchEffect } from 'vue'\nimport { convertToUnit, createRange, genericComponent, propsFactory, templateRef, useRender } from '@/util'\n\n// Types\nimport type { PropType } from 'vue'\n\n// Types\nexport type VDatePickerYearsSlots = {\n  year: {\n    year: {\n      text: string\n      value: number\n    }\n    i: number\n    props: {\n      active: boolean\n      color?: string\n      rounded: boolean\n      text: string\n      variant: 'flat' | 'text'\n      onClick: () => void\n    }\n  }\n}\n\nexport const makeVDatePickerYearsProps = propsFactory({\n  color: String,\n  height: [String, Number],\n  min: null as any as PropType<unknown>,\n  max: null as any as PropType<unknown>,\n  modelValue: Number,\n}, 'VDatePickerYears')\n\nexport const VDatePickerYears = genericComponent<VDatePickerYearsSlots>()({\n  name: 'VDatePickerYears',\n\n  props: makeVDatePickerYearsProps(),\n\n  emits: {\n    'update:modelValue': (year: number) => true,\n  },\n\n  setup (props, { emit, slots }) {\n    const adapter = useDate()\n    const model = useProxiedModel(props, 'modelValue')\n    const years = computed(() => {\n      const year = adapter.getYear(adapter.date())\n\n      let min = year - 100\n      let max = year + 52\n\n      if (props.min) {\n        min = adapter.getYear(adapter.date(props.min))\n      }\n\n      if (props.max) {\n        max = adapter.getYear(adapter.date(props.max))\n      }\n\n      let date = adapter.startOfYear(adapter.date())\n\n      date = adapter.setYear(date, min)\n\n      return createRange(max - min + 1, min).map(i => {\n        const text = adapter.format(date, 'year')\n        date = adapter.setYear(date, adapter.getYear(date) + 1)\n\n        return {\n          text,\n          value: i,\n        }\n      })\n    })\n\n    watchEffect(() => {\n      model.value = model.value ?? adapter.getYear(adapter.date())\n    })\n\n    const yearRef = templateRef()\n\n    onMounted(async () => {\n      await nextTick()\n      yearRef.el?.scrollIntoView({ block: 'center' })\n    })\n\n    useRender(() => (\n      <div\n        class=\"v-date-picker-years\"\n        style={{\n          height: convertToUnit(props.height),\n        }}\n      >\n        <div class=\"v-date-picker-years__content\">\n          { years.value.map((year, i) => {\n            const btnProps = {\n              ref: model.value === year.value ? yearRef : undefined,\n              active: model.value === year.value,\n              color: model.value === year.value ? props.color : undefined,\n              rounded: true,\n              text: year.text,\n              variant: model.value === year.value ? 'flat' : 'text',\n              onClick: () => {\n                if (model.value === year.value) {\n                  emit('update:modelValue', model.value)\n                  return\n                }\n                model.value = year.value\n              },\n            } as const\n\n            return slots.year?.({\n              year,\n              i,\n              props: btnProps,\n            }) ?? (\n              <VBtn\n                key=\"month\"\n                { ...btnProps }\n              />\n            )\n          })}\n        </div>\n      </div>\n    ))\n\n    return {}\n  },\n})\n\nexport type VDatePickerYears = InstanceType<typeof VDatePickerYears>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}