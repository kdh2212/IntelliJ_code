{"ast":null,"code":"import _objectSpread from \"C:/_dev3/restAPI4/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"core-js/modules/es.array.is-array.js\";\nimport \"core-js/modules/web.timers.js\";\n// Components\nimport { VMenuSymbol } from \"../VMenu/shared.mjs\"; // Composables\nimport { makeDelayProps, useDelay } from \"../../composables/delay.mjs\"; // Utilities\nimport { computed, effectScope, inject, mergeProps, nextTick, onScopeDispose, ref, watch, watchEffect } from 'vue';\nimport { bindProps, getCurrentInstance, IN_BROWSER, matchesSelector, propsFactory, templateRef, unbindProps } from \"../../util/index.mjs\"; // Types\nexport var makeActivatorProps = propsFactory(_objectSpread({\n  target: [String, Object],\n  activator: [String, Object],\n  activatorProps: {\n    type: Object,\n    \"default\": function _default() {\n      return {};\n    }\n  },\n  openOnClick: {\n    type: Boolean,\n    \"default\": undefined\n  },\n  openOnHover: Boolean,\n  openOnFocus: {\n    type: Boolean,\n    \"default\": undefined\n  },\n  closeOnContentClick: Boolean\n}, makeDelayProps()), 'VOverlay-activator');\nexport function useActivator(props, _ref) {\n  var isActive = _ref.isActive,\n    isTop = _ref.isTop,\n    contentEl = _ref.contentEl;\n  var vm = getCurrentInstance('useActivator');\n  var activatorEl = ref();\n  var isHovered = false;\n  var isFocused = false;\n  var firstEnter = true;\n  var openOnFocus = computed(function () {\n    return props.openOnFocus || props.openOnFocus == null && props.openOnHover;\n  });\n  var openOnClick = computed(function () {\n    return props.openOnClick || props.openOnClick == null && !props.openOnHover && !openOnFocus.value;\n  });\n  var _useDelay = useDelay(props, function (value) {\n      if (value === (props.openOnHover && isHovered || openOnFocus.value && isFocused) && !(props.openOnHover && isActive.value && !isTop.value)) {\n        if (isActive.value !== value) {\n          firstEnter = true;\n        }\n        isActive.value = value;\n      }\n    }),\n    runOpenDelay = _useDelay.runOpenDelay,\n    runCloseDelay = _useDelay.runCloseDelay;\n  var cursorTarget = ref();\n  var availableEvents = {\n    onClick: function onClick(e) {\n      e.stopPropagation();\n      activatorEl.value = e.currentTarget || e.target;\n      if (!isActive.value) {\n        cursorTarget.value = [e.clientX, e.clientY];\n      }\n      isActive.value = !isActive.value;\n    },\n    onMouseenter: function onMouseenter(e) {\n      var _e$sourceCapabilities;\n      if ((_e$sourceCapabilities = e.sourceCapabilities) !== null && _e$sourceCapabilities !== void 0 && _e$sourceCapabilities.firesTouchEvents) return;\n      isHovered = true;\n      activatorEl.value = e.currentTarget || e.target;\n      runOpenDelay();\n    },\n    onMouseleave: function onMouseleave(e) {\n      isHovered = false;\n      runCloseDelay();\n    },\n    onFocus: function onFocus(e) {\n      if (matchesSelector(e.target, ':focus-visible') === false) return;\n      isFocused = true;\n      e.stopPropagation();\n      activatorEl.value = e.currentTarget || e.target;\n      runOpenDelay();\n    },\n    onBlur: function onBlur(e) {\n      isFocused = false;\n      e.stopPropagation();\n      runCloseDelay();\n    }\n  };\n  var activatorEvents = computed(function () {\n    var events = {};\n    if (openOnClick.value) {\n      events.onClick = availableEvents.onClick;\n    }\n    if (props.openOnHover) {\n      events.onMouseenter = availableEvents.onMouseenter;\n      events.onMouseleave = availableEvents.onMouseleave;\n    }\n    if (openOnFocus.value) {\n      events.onFocus = availableEvents.onFocus;\n      events.onBlur = availableEvents.onBlur;\n    }\n    return events;\n  });\n  var contentEvents = computed(function () {\n    var events = {};\n    if (props.openOnHover) {\n      events.onMouseenter = function () {\n        isHovered = true;\n        runOpenDelay();\n      };\n      events.onMouseleave = function () {\n        isHovered = false;\n        runCloseDelay();\n      };\n    }\n    if (openOnFocus.value) {\n      events.onFocusin = function () {\n        isFocused = true;\n        runOpenDelay();\n      };\n      events.onFocusout = function () {\n        isFocused = false;\n        runCloseDelay();\n      };\n    }\n    if (props.closeOnContentClick) {\n      var menu = inject(VMenuSymbol, null);\n      events.onClick = function () {\n        isActive.value = false;\n        menu === null || menu === void 0 || menu.closeParents();\n      };\n    }\n    return events;\n  });\n  var scrimEvents = computed(function () {\n    var events = {};\n    if (props.openOnHover) {\n      events.onMouseenter = function () {\n        if (firstEnter) {\n          isHovered = true;\n          firstEnter = false;\n          runOpenDelay();\n        }\n      };\n      events.onMouseleave = function () {\n        isHovered = false;\n        runCloseDelay();\n      };\n    }\n    return events;\n  });\n  watch(isTop, function (val) {\n    var _contentEl$value;\n    if (val && (props.openOnHover && !isHovered && (!openOnFocus.value || !isFocused) || openOnFocus.value && !isFocused && (!props.openOnHover || !isHovered)) && !((_contentEl$value = contentEl.value) !== null && _contentEl$value !== void 0 && _contentEl$value.contains(document.activeElement))) {\n      isActive.value = false;\n    }\n  });\n  watch(isActive, function (val) {\n    if (!val) {\n      setTimeout(function () {\n        cursorTarget.value = undefined;\n      });\n    }\n  }, {\n    flush: 'post'\n  });\n  var activatorRef = templateRef();\n  watchEffect(function () {\n    if (!activatorRef.value) return;\n    nextTick(function () {\n      activatorEl.value = activatorRef.el;\n    });\n  });\n  var targetRef = templateRef();\n  var target = computed(function () {\n    if (props.target === 'cursor' && cursorTarget.value) return cursorTarget.value;\n    if (targetRef.value) return targetRef.el;\n    return getTarget(props.target, vm) || activatorEl.value;\n  });\n  var targetEl = computed(function () {\n    return Array.isArray(target.value) ? undefined : target.value;\n  });\n  var scope;\n  watch(function () {\n    return !!props.activator;\n  }, function (val) {\n    if (val && IN_BROWSER) {\n      scope = effectScope();\n      scope.run(function () {\n        _useActivator(props, vm, {\n          activatorEl: activatorEl,\n          activatorEvents: activatorEvents\n        });\n      });\n    } else if (scope) {\n      scope.stop();\n    }\n  }, {\n    flush: 'post',\n    immediate: true\n  });\n  onScopeDispose(function () {\n    var _scope;\n    (_scope = scope) === null || _scope === void 0 || _scope.stop();\n  });\n  return {\n    activatorEl: activatorEl,\n    activatorRef: activatorRef,\n    target: target,\n    targetEl: targetEl,\n    targetRef: targetRef,\n    activatorEvents: activatorEvents,\n    contentEvents: contentEvents,\n    scrimEvents: scrimEvents\n  };\n}\nfunction _useActivator(props, vm, _ref2) {\n  var activatorEl = _ref2.activatorEl,\n    activatorEvents = _ref2.activatorEvents;\n  watch(function () {\n    return props.activator;\n  }, function (val, oldVal) {\n    if (oldVal && val !== oldVal) {\n      var activator = getActivator(oldVal);\n      activator && unbindActivatorProps(activator);\n    }\n    if (val) {\n      nextTick(function () {\n        return bindActivatorProps();\n      });\n    }\n  }, {\n    immediate: true\n  });\n  watch(function () {\n    return props.activatorProps;\n  }, function () {\n    bindActivatorProps();\n  });\n  onScopeDispose(function () {\n    unbindActivatorProps();\n  });\n  function bindActivatorProps() {\n    var el = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : getActivator();\n    var _props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : props.activatorProps;\n    if (!el) return;\n    bindProps(el, mergeProps(activatorEvents.value, _props));\n  }\n  function unbindActivatorProps() {\n    var el = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : getActivator();\n    var _props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : props.activatorProps;\n    if (!el) return;\n    unbindProps(el, mergeProps(activatorEvents.value, _props));\n  }\n  function getActivator() {\n    var selector = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : props.activator;\n    var activator = getTarget(selector, vm);\n\n    // The activator should only be a valid element (Ignore comments and text nodes)\n    activatorEl.value = (activator === null || activator === void 0 ? void 0 : activator.nodeType) === Node.ELEMENT_NODE ? activator : undefined;\n    return activatorEl.value;\n  }\n}\nfunction getTarget(selector, vm) {\n  if (!selector) return;\n  var target;\n  if (selector === 'parent') {\n    var _vm$proxy;\n    var el = vm === null || vm === void 0 || (_vm$proxy = vm.proxy) === null || _vm$proxy === void 0 || (_vm$proxy = _vm$proxy.$el) === null || _vm$proxy === void 0 ? void 0 : _vm$proxy.parentNode;\n    while ((_el = el) !== null && _el !== void 0 && _el.hasAttribute('data-no-activator')) {\n      var _el;\n      el = el.parentNode;\n    }\n    target = el;\n  } else if (typeof selector === 'string') {\n    // Selector\n    target = document.querySelector(selector);\n  } else if ('$el' in selector) {\n    // Component (ref)\n    target = selector.$el;\n  } else {\n    // HTMLElement | Element | [x, y]\n    target = selector;\n  }\n  return target;\n}","map":{"version":3,"names":["VMenuSymbol","makeDelayProps","useDelay","computed","effectScope","inject","mergeProps","nextTick","onScopeDispose","ref","watch","watchEffect","bindProps","getCurrentInstance","IN_BROWSER","matchesSelector","propsFactory","templateRef","unbindProps","makeActivatorProps","_objectSpread","target","String","Object","activator","activatorProps","type","default","openOnClick","Boolean","undefined","openOnHover","openOnFocus","closeOnContentClick","useActivator","props","_ref","isActive","isTop","contentEl","vm","activatorEl","isHovered","isFocused","firstEnter","value","_useDelay","runOpenDelay","runCloseDelay","cursorTarget","availableEvents","onClick","e","stopPropagation","currentTarget","clientX","clientY","onMouseenter","_e$sourceCapabilities","sourceCapabilities","firesTouchEvents","onMouseleave","onFocus","onBlur","activatorEvents","events","contentEvents","onFocusin","onFocusout","menu","closeParents","scrimEvents","val","_contentEl$value","contains","document","activeElement","setTimeout","flush","activatorRef","el","targetRef","getTarget","targetEl","Array","isArray","scope","run","_useActivator","stop","immediate","_scope","_ref2","oldVal","getActivator","unbindActivatorProps","bindActivatorProps","arguments","length","_props","selector","nodeType","Node","ELEMENT_NODE","_vm$proxy","proxy","$el","parentNode","_el","hasAttribute","querySelector"],"sources":["../../../src/components/VOverlay/useActivator.tsx"],"sourcesContent":["// Components\nimport { VMenuSymbol } from '@/components/VMenu/shared'\n\n// Composables\nimport { makeDelayProps, useDelay } from '@/composables/delay'\n\n// Utilities\nimport {\n  computed,\n  effectScope,\n  inject,\n  mergeProps,\n  nextTick,\n  onScopeDispose,\n  ref,\n  watch,\n  watchEffect,\n} from 'vue'\nimport {\n  bindProps,\n  getCurrentInstance,\n  IN_BROWSER,\n  matchesSelector,\n  propsFactory,\n  templateRef,\n  unbindProps,\n} from '@/util'\n\n// Types\nimport type {\n  ComponentInternalInstance,\n  ComponentPublicInstance,\n  EffectScope,\n  PropType,\n  Ref,\n} from 'vue'\nimport type { DelayProps } from '@/composables/delay'\n\ninterface ActivatorProps extends DelayProps {\n  target: 'parent' | 'cursor' | (string & {}) | Element | ComponentPublicInstance | [x: number, y: number] | undefined\n  activator: 'parent' | (string & {}) | Element | ComponentPublicInstance | undefined\n  activatorProps: Record<string, any>\n\n  openOnClick: boolean | undefined\n  openOnHover: boolean\n  openOnFocus: boolean | undefined\n\n  closeOnContentClick: boolean\n}\n\nexport const makeActivatorProps = propsFactory({\n  target: [String, Object] as PropType<ActivatorProps['target']>,\n  activator: [String, Object] as PropType<ActivatorProps['activator']>,\n  activatorProps: {\n    type: Object as PropType<ActivatorProps['activatorProps']>,\n    default: () => ({}),\n  },\n\n  openOnClick: {\n    type: Boolean,\n    default: undefined,\n  },\n  openOnHover: Boolean,\n  openOnFocus: {\n    type: Boolean,\n    default: undefined,\n  },\n\n  closeOnContentClick: Boolean,\n\n  ...makeDelayProps(),\n}, 'VOverlay-activator')\n\nexport function useActivator (\n  props: ActivatorProps,\n  { isActive, isTop, contentEl }: {\n    isActive: Ref<boolean>\n    isTop: Ref<boolean>\n    contentEl: Ref<HTMLElement | undefined>\n  }\n) {\n  const vm = getCurrentInstance('useActivator')\n  const activatorEl = ref<HTMLElement>()\n\n  let isHovered = false\n  let isFocused = false\n  let firstEnter = true\n\n  const openOnFocus = computed(() => props.openOnFocus || (props.openOnFocus == null && props.openOnHover))\n  const openOnClick = computed(() => props.openOnClick || (props.openOnClick == null && !props.openOnHover && !openOnFocus.value))\n\n  const { runOpenDelay, runCloseDelay } = useDelay(props, value => {\n    if (\n      value === (\n        (props.openOnHover && isHovered) ||\n        (openOnFocus.value && isFocused)\n      ) && !(props.openOnHover && isActive.value && !isTop.value)\n    ) {\n      if (isActive.value !== value) {\n        firstEnter = true\n      }\n      isActive.value = value\n    }\n  })\n\n  const cursorTarget = ref<[x: number, y: number]>()\n  const availableEvents = {\n    onClick: (e: MouseEvent) => {\n      e.stopPropagation()\n      activatorEl.value = (e.currentTarget || e.target) as HTMLElement\n      if (!isActive.value) {\n        cursorTarget.value = [e.clientX, e.clientY]\n      }\n      isActive.value = !isActive.value\n    },\n    onMouseenter: (e: MouseEvent) => {\n      if (e.sourceCapabilities?.firesTouchEvents) return\n\n      isHovered = true\n      activatorEl.value = (e.currentTarget || e.target) as HTMLElement\n      runOpenDelay()\n    },\n    onMouseleave: (e: MouseEvent) => {\n      isHovered = false\n      runCloseDelay()\n    },\n    onFocus: (e: FocusEvent) => {\n      if (matchesSelector(e.target as HTMLElement, ':focus-visible') === false) return\n\n      isFocused = true\n      e.stopPropagation()\n      activatorEl.value = (e.currentTarget || e.target) as HTMLElement\n\n      runOpenDelay()\n    },\n    onBlur: (e: FocusEvent) => {\n      isFocused = false\n      e.stopPropagation()\n\n      runCloseDelay()\n    },\n  }\n\n  const activatorEvents = computed(() => {\n    const events: Partial<typeof availableEvents> = {}\n\n    if (openOnClick.value) {\n      events.onClick = availableEvents.onClick\n    }\n    if (props.openOnHover) {\n      events.onMouseenter = availableEvents.onMouseenter\n      events.onMouseleave = availableEvents.onMouseleave\n    }\n    if (openOnFocus.value) {\n      events.onFocus = availableEvents.onFocus\n      events.onBlur = availableEvents.onBlur\n    }\n\n    return events\n  })\n\n  const contentEvents = computed(() => {\n    const events: Record<string, EventListener> = {}\n\n    if (props.openOnHover) {\n      events.onMouseenter = () => {\n        isHovered = true\n        runOpenDelay()\n      }\n      events.onMouseleave = () => {\n        isHovered = false\n        runCloseDelay()\n      }\n    }\n\n    if (openOnFocus.value) {\n      events.onFocusin = () => {\n        isFocused = true\n        runOpenDelay()\n      }\n      events.onFocusout = () => {\n        isFocused = false\n        runCloseDelay()\n      }\n    }\n\n    if (props.closeOnContentClick) {\n      const menu = inject(VMenuSymbol, null)\n      events.onClick = () => {\n        isActive.value = false\n        menu?.closeParents()\n      }\n    }\n\n    return events\n  })\n\n  const scrimEvents = computed(() => {\n    const events: Record<string, EventListener> = {}\n\n    if (props.openOnHover) {\n      events.onMouseenter = () => {\n        if (firstEnter) {\n          isHovered = true\n          firstEnter = false\n          runOpenDelay()\n        }\n      }\n      events.onMouseleave = () => {\n        isHovered = false\n        runCloseDelay()\n      }\n    }\n\n    return events\n  })\n\n  watch(isTop, val => {\n    if (val && (\n      (props.openOnHover && !isHovered && (!openOnFocus.value || !isFocused)) ||\n      (openOnFocus.value && !isFocused && (!props.openOnHover || !isHovered))\n    ) && !contentEl.value?.contains(document.activeElement)) {\n      isActive.value = false\n    }\n  })\n\n  watch(isActive, val => {\n    if (!val) {\n      setTimeout(() => {\n        cursorTarget.value = undefined\n      })\n    }\n  }, { flush: 'post' })\n\n  const activatorRef = templateRef()\n  watchEffect(() => {\n    if (!activatorRef.value) return\n\n    nextTick(() => {\n      activatorEl.value = activatorRef.el\n    })\n  })\n\n  const targetRef = templateRef()\n  const target = computed(() => {\n    if (props.target === 'cursor' && cursorTarget.value) return cursorTarget.value\n    if (targetRef.value) return targetRef.el\n    return getTarget(props.target, vm) || activatorEl.value\n  })\n  const targetEl = computed(() => {\n    return Array.isArray(target.value)\n      ? undefined\n      : target.value\n  })\n\n  let scope: EffectScope\n  watch(() => !!props.activator, val => {\n    if (val && IN_BROWSER) {\n      scope = effectScope()\n      scope.run(() => {\n        _useActivator(props, vm, { activatorEl, activatorEvents })\n      })\n    } else if (scope) {\n      scope.stop()\n    }\n  }, { flush: 'post', immediate: true })\n\n  onScopeDispose(() => {\n    scope?.stop()\n  })\n\n  return { activatorEl, activatorRef, target, targetEl, targetRef, activatorEvents, contentEvents, scrimEvents }\n}\n\nfunction _useActivator (\n  props: ActivatorProps,\n  vm: ComponentInternalInstance,\n  { activatorEl, activatorEvents }: Pick<ReturnType<typeof useActivator>, 'activatorEl' | 'activatorEvents'>\n) {\n  watch(() => props.activator, (val, oldVal) => {\n    if (oldVal && val !== oldVal) {\n      const activator = getActivator(oldVal)\n      activator && unbindActivatorProps(activator)\n    }\n    if (val) {\n      nextTick(() => bindActivatorProps())\n    }\n  }, { immediate: true })\n\n  watch(() => props.activatorProps, () => {\n    bindActivatorProps()\n  })\n\n  onScopeDispose(() => {\n    unbindActivatorProps()\n  })\n\n  function bindActivatorProps (el = getActivator(), _props = props.activatorProps) {\n    if (!el) return\n\n    bindProps(el, mergeProps(activatorEvents.value, _props))\n  }\n\n  function unbindActivatorProps (el = getActivator(), _props = props.activatorProps) {\n    if (!el) return\n\n    unbindProps(el, mergeProps(activatorEvents.value, _props))\n  }\n\n  function getActivator (selector = props.activator): HTMLElement | undefined {\n    const activator = getTarget(selector, vm)\n\n    // The activator should only be a valid element (Ignore comments and text nodes)\n    activatorEl.value = activator?.nodeType === Node.ELEMENT_NODE ? activator : undefined\n\n    return activatorEl.value\n  }\n}\n\nfunction getTarget<T extends 'parent' | string | Element | ComponentPublicInstance | [x: number, y: number] | undefined> (\n  selector: T,\n  vm: ComponentInternalInstance\n): HTMLElement | undefined | (T extends any[] ? [x: number, y: number] : never) {\n  if (!selector) return\n\n  let target\n  if (selector === 'parent') {\n    let el = vm?.proxy?.$el?.parentNode\n    while (el?.hasAttribute('data-no-activator')) {\n      el = el.parentNode\n    }\n    target = el\n  } else if (typeof selector === 'string') {\n    // Selector\n    target = document.querySelector(selector)\n  } else if ('$el' in selector) {\n    // Component (ref)\n    target = selector.$el\n  } else {\n    // HTMLElement | Element | [x, y]\n    target = selector\n  }\n\n  return target\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}