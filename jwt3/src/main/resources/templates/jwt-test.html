<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>JWT 테스트</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container mt-5">
    <h2>JWT 테스트 페이지</h2>

    <!-- 토큰 생성 -->
    <div class="mb-3">
        <label for="username" class="form-label">Username:</label>
        <input type="text" id="username" class="form-control" placeholder="Enter username">
        <button class="btn btn-primary mt-2" onclick="generateToken()">토큰 생성</button>
    </div>

    <div class="mb-3">
        <label for="generatedToken" class="form-label">Generated Token:</label>
        <textarea id="generatedToken" class="form-control" rows="3" readonly></textarea>
    </div>

    <hr>

    <!-- 토큰 검증 -->
    <div class="mb-3">
        <label for="tokenToValidate" class="form-label">검증할 토큰:</label>
        <textarea id="tokenToValidate" class="form-control" rows="3"></textarea>
        <button class="btn btn-success mt-2" onclick="validateToken()">검증</button>
    </div>

    <div class="mb-3">
        <label for="validationResult" class="form-label">검증 결과:</label>
        <textarea id="validationResult" class="form-control" rows="2" readonly></textarea>
    </div>
</div>

<script>
    const apiBase = "/api/test";

    function generateToken() {
        const username = document.getElementById('username').value;
        if (!username) {
            alert("Username을 입력하세요!");
            return;
        }

        fetch(`${apiBase}/generate?username=${username}`)
            .then(res => res.text())
            .then(token => {
                document.getElementById('generatedToken').value = token;
                document.getElementById('tokenToValidate').value = token;
            });
    }

    function validateToken() {
        const token = document.getElementById('tokenToValidate').value;
        if (!token) {
            alert("토큰을 입력하세요!");
            return;
        }

        fetch(`${apiBase}/validate?token=${token}`)
            .then(res => res.text())
            .then(result => {
                document.getElementById('validationResult').value = result;
            });
    }
</script>
</body>
</html>
